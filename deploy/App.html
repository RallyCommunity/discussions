<!DOCTYPE html>
<html>
<head>
    <title>Discussions</title>

    <script type="text/javascript" src="/apps/2.0rc2/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",launch:function(){var millisecondsInDay=864e5,currentDate=new Date,startDate=new Date(currentDate-30*millisecondsInDay),startDateUTC=startDate.toISOString();this._filters=[{property:"CreationDate",operator:">=",value:startDateUTC}];var myStore=Ext.create("Rally.data.WsapiDataStore",{model:"ConversationPost",autoLoad:!0,remoteSort:!1,fetch:["Artifact","Text","CreationDate","User","FormattedID"],filters:this._filters,listeners:{load:function(store,records,success){console.log("loaded %i records",records.length),this._makeGrid(myStore)},scope:this}})},_makeGrid:function(myStore){console.log("make grid"),this._myGrid=Ext.create("Rally.ui.grid.Grid",{store:myStore,columnCfgs:[{text:"Artifact",dataIndex:"Artifact",flex:1,renderer:function(artifact){return'<a href="'+Rally.nav.Manager.getDetailUrl(artifact)+'">'+artifact.FormattedID+"</a>"}},{text:"Text",dataIndex:"Text",flex:2},{text:"CreationDate",dataIndex:"CreationDate",flex:1},{text:"User",dataIndex:"User",flex:1}],height:650}),this.add(this._myGrid)}});

            Rally.launchApp('CustomApp', {
                name:"Discussions",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .app {
     /* Add app styles here */
}

    </style>
</head>
<body></body>
</html>
